{"version":3,"sources":["uni-app:///main.js","webpack:///D:/program/qxqx-vue/packageB/pages/live-info/live-infoplay.vue?1d05","webpack:///D:/program/qxqx-vue/packageB/pages/live-info/live-infoplay.vue?501e","webpack:///D:/program/qxqx-vue/packageB/pages/live-info/live-infoplay.vue?040c","webpack:///D:/program/qxqx-vue/packageB/pages/live-info/live-infoplay.vue?9291","uni-app:///packageB/pages/live-info/live-infoplay.vue","webpack:///D:/program/qxqx-vue/packageB/pages/live-info/live-infoplay.vue?b476","webpack:///D:/program/qxqx-vue/packageB/pages/live-info/live-infoplay.vue?1754"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","uniNavBar","Emojy","imtAudio","data","livemode","fromPPt","fromshare","ShareScreenUid","Recorder","chat_audio","recording","isStopVoice","voiceInterval","voiceTime","canSend","PointY","voiceIconText","voiceimagestatus","voiceTitle","chat_voice","isvoice","show_big_ppt","scrollH","system_ppt_top","tabIndex","tabBars","name","scrollInto","scrollTop","list","isConnectSocket","liveInfo","userInfo","isQue","agoraappid","agoramRoomName","agorauid","phonetype","wechatliveurl","res_url","wechatliveurl_small","myID","content","islive","Usercount","diancolor","timer","livetype","intr","pull","thumb","duration","currentTime","videoContext","buttonimage","status","start","end","ppts","noppt","pptindex","showppt_index","show_big_ppt_index","show_big_ppt_index2","emojylist","showemojy","inputbuttom","shut_place","isshut","shownothingVideo","zhibo_leave","zhibo_leave_text","zhibo_leave_text_w","show_nothing_image","show_nothing_image2","input_adjust","video_zhezhao","voice_list","intervl","voice_index","QiNiutoken","voice_url","voice_length","animation","showpic","hidepic","setInter1","num","picmaxnum","isaudioerror","showsmallvideo","showShareScreen","showBigScreen","showEndScreen","watchDuration","watchTimer","onReady","that","uni","success","top","onUnload","socket","onHide","onLoad","console","url","clearInterval","methods","saveCurrentUrl","app","stopPic","onVideoEnded","tartWatchTimer","stopWatchTimer","submitWatchDuration","method","uid","token","liveuid","courseid","lessonid","fail","changePic","timingFunction","delay","startVoice","format","title","icon","beginVoice","moveVoice","endVoice","cancelVoice","handleRecorder","tempFilePath","contentDuration","qiniuUploader","region","domain","key","uptoken","big_change","big_ppt_back","getTime","backCourseList","showCancel","cancelText","confirmText","confirmColor","setTimeout","delta","complete","open_voice","addNodeListen","query","transports","timeout","roomnum","nickname","stream","path","msgInfo","showBigView","songemojy","GetChat","msg","changeXXK","onChangeTab","decypt","newcode","agoraWechat","wechatAgora","agoraH5","liveLive","_this","sendvoice","submitemojy","new_sendemojy","send","question","sort2url","newObj","text","setSign","str","pageToBottom"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;AACa;;;AAGzE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,sKAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjGA;AAAA;AAAA;AAAA;AAAynB,CAAgB,unBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACgU7oB;AAGA;AACA;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;QACA;QACA;QACA;MACA;MACAC;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACA;IACAC;IACAC;MACAC;QACAF;QAEAA;QACAA,4FACAG;QAEAH;MACA;IACA;IACA;EACA;EACAI;IACA;IACA;IACA;IACAC;IACAA;EACA;EACAC;IACA;IACA;EACA;EACAC;IAAA;IACA;IAEAC;IACA;IAiBA;MACAP;QACAQ;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAR;MACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;IACA;;IACA;MACA;MACA;MACA;MACAS;MACA;QACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;MACA;MACAA;MACA;QACA;QACA;MACA;IACA;IACA;MACA;MACA;MACAA;MACA;MACA;MACA;IACA;IACA;IACA;MACA;IACA;IACA;IACA;MACAA;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;MAEA;QAAA;MAAA;MACA;MAEAJ;MACAK;IACA;IACAC;MACAJ;IACA;IACAK;MAEA;MACA;MACAP;MACA;IACA;IACAQ;MAAA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACAP;QACA;MACA;IACA;IACAQ;MAAA;MACA;MACA;MACA;QACAV;QACA;MACA;MACAP;QACAQ;QAAA;QACAU;QACAjH;UACAkH;UACAC;UACAC;UACAC;UACAC;UACAtE;QACA;QACAgD;UACAM;QACA;QACAiB;UACAjB;QACA;MACA;IACA;IACAkB;MAAA;MAAA;MACAhB;MACA;QACAiB;QACAzE;QACA0E;MACA;MACA;MACA;QACA;QACA;UACA;QACA;QACA1C;UACAhC;UACA0E;QACA;QACA;QACA1C;UACAhC;UACA0E;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACAnB;MACA;QACA;QACA;MACA;MACAT;QACAQ;QACAU;QACAjH;UACA;UACA;QACA;QACAgG;UACAD;UACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA6B;YACA;UACA;YACA7B;cACA8B;cACAC;YACA;UACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QACA;MACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC,8CAGA;MAAA;MAAA,IAFAC;QACApF;MAEA;QACA;MACA;MACA;MAEA;MACAsD;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA+B;MAaA;MACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;QACAhC;MACA;QACAiC;QACAC;QACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA/C;QACA8B;QACAtF;QACAwG;QACAC;QACAC;QACAC;QACAlD;UACA;YACA;YACA;YACA;YACAG;YACAA;YACAgD;cACApD;cACAA;gBACAqD;cACA;YACA;UACA;QACA;QACA7B;QACA8B;MACA;IACA;IACAC;MAAA;MACA;MACA9C;MACA;QACA;QACA;MACA;MACA;QACA;QACAF;QACA;QACAE;MACA;QACAF;QACA;UACA;UACAA;UACA;UACAE;UACA;QACA;QACA;QACA;QACA;QACA;UACAF;UACA;UACA;UACA6C;YACA;YACA;UACA;UACAA;YACA;YACA;UACA;QACA;MACA;MACA;QACApD;UACA8B;QACA;QACA;QACArB;MACA;IACA;IACA+C;MAAA;MACApD;QACAqD;QACAC;QACAC;MACA;MACAvD;QACAe;QAAA;QACAyC;QAAA;QACAC;QACAC,mFACAvC;QAAA;QACAH;MACA;MACAhB;QACAG;MACA;MACAH;QACAG;QACA;UACAP;YACA8B;YACAtF;YACAwG;YACAC;YACAC;YACAC;YACAlD;cACAD;gBACAqD;cACA;YACA;YACA7B;YACA8B;UACA;UACA;QACA;QACA;MACA;;MACA;MACAlD;QACAG;QACA;UACA;UACA;UACA;YACA;cACAA;cACA;cACA;cACA;cACA;cACA;cACA;cAEA;cACA;YAOA;cACAA;cACA;gBACA;cACA;cACA;cACA;cACA;cACA;cACA;cAEA;cACA;YAOA;cACAA;cACA;cACA;gBACA;cACA;cACA;cACA;cACA;cACA;cAEA;cACA;YAOA;UACA;UACA;YACA;YACA;cACA;gBACAP;kBACA8B;kBACAC;gBACA;gBACAqB;kBACApD;oBACAqD;kBACA;gBACA;cACA;YACA;UACA;UACA;YACA;YACA;YACA;YACA;YACA;YACA;UACA;UACA;YACA;YACA;YACA;cACA;cACA;cACA;YACA;cACA;cACA;cACA;YACA;UACA;UACA;YACA;cACA;cACA;cACArD;gBACA8B;gBACAC;cACA;YACA;UACA;UACA;YACA;cACA;cACA;cACAxB;cACA;YACA;cACA;cACA;cACA;cACA;cACA;gBACA;kBACA;oBACA;oBACA/D,0CACA,2EACAuH,aACA;kBACA;gBACA;cACA;cACA;cACAC;cACA;cACA;YACA;UACA;UACA;YACA;cACA;YACA;YACAzD;UACA;UACA;YACA;cACA;gBACA;gBACA;cACA;cACA;cACA;cACAA;YACA;cACAA;cACA;cACA;gBACA;gBACA;kBACA;gBACA;cACA;cACA;gBACA;cACA;YACA;cACA;cACA;cACAA;YACA;UACA;QACA;MACA;IACA;IACA0D;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACAnE;QACAQ;QACAU;QACAjH;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;QACAgG;UACA;UACA;UACA;UACA;UACA;YACA;YACA;YACA;cACA;gBACA;kBACA;kBACAzD,yCACA,2EACAuH,aACA;gBACA;cACA;YACA;YACA;YACAK;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAjB;kBACA;gBACA;gBAAA,iCACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAkB;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;UACA;UACA;YACA;cACAC;YACA;cACAA;YACA;UACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACAC;MACAA;MACAA;QACAnE;QACA;QACAmE;UACAnE;UACA;QACA;UACAA;UACA;QACA;MACA,GACA;QACA;QACAA;MACA;MACA;MACAmE;QACAA;UACA;UACA;UACAnE;UACA;UACA;YACA;UACA;YACA;UACA;QACA;UACAA;UACA;UACA;QACA;MACA;MACAmE;QACA;QACA;MACA;MACA;MACAA;QACAnE;MACA;QACAA;MACA;IACA;IACAoE,oDA4CA;IACA;IACAC;MAAA;MACA;MACA;MACAC;MACA7E;QACAQ;QACAU;QACAjH;UACA;UACA;UACA;UACA;UACA;QACA;QACAgG;UACA;YACAD;cACAQ;cACAP;cACAuB;cACA8B;YACA;YACA;UACA;UACA;YACA;YACA;YACA;YACA;cACA;YACA;cACA;YACA;YACA;cACA;cACA;cACA;YACA;cACA;cACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;YACA;cACA;cACA;cACA;YACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;YACA;YACA;YACA;YACA;YACA;cACA;cACA;YACA;YACA;YACA;YACA;YAEA;cACA;gBACA/C;gBACA;gBACA;gBACA;gBACA;cAKA;gBACAA;gBACA;gBACA;gBACA;gBACA;gBACA;cAKA;gBACAA;gBACA;gBACA;gBACA;cAKA;cACA;gBACA6C;kBACA;oBACA;sBACA;sBACA;sBACA;oBACA;kBACA;gBACA;cACA;gBACAA;kBACA;oBACA,oCACA,mCACAnH,yCACA;kBACA;gBACA;cACA;gBACA;cACA;gBACA;cACA;YACA;UAEA;YACA+D;cACA8B;cACAC;YACA;UACA;QACA;MACA;IACA;IACA+C;MACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA/E;QACA;QACA;MACA;IACA;IACA;IACAgF;MACA;QACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACAjF;MACA;MACA;QACA;UACA;YACA8B;YACAC;UACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;MACA/B;QACAQ;QACAU;QACAjH;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;QACA;QACAgG;UACA;UACA;YACA;YACA;cACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,4DACA;gBACA;gBACA;gBACA;gBACA;gBACA;cACA;cACA;cACA;YACA;YACAG;YACA;YACA;YACA;UACA;YACAJ;cACA8B;cACAC;YACA;UACA;QACA;QACAP;UACAxB;YACA+B;YACAD;UACA;QACA;MACA;IACA;IACAoD;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;QAAA;QACAC;MACA;;MACA;MACA;QACAC;MACA;MACAA;MACAA;MAEA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;QAAA;QACA;QACAC;MACA;MACAA;MACA;MACA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;MACApC;QACAyB;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC1jDA;AAAA;AAAA;AAAA;AAAk5B,CAAgB,42BAAG,EAAC,C;;;;;;;;;;;ACAt6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"packageB/pages/live-info/live-infoplay.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './packageB/pages/live-info/live-infoplay.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./live-infoplay.vue?vue&type=template&id=041918b3&\"\nvar renderjs\nimport script from \"./live-infoplay.vue?vue&type=script&lang=js&\"\nexport * from \"./live-infoplay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./live-infoplay.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"packageB/pages/live-info/live-infoplay.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./live-infoplay.vue?vue&type=template&id=041918b3&\"","var components\ntry {\n  components = {\n    imtAudio: function () {\n      return import(\n        /* webpackChunkName: \"components/imt-audio/imt-audio\" */ \"@/components/imt-audio/imt-audio.vue\"\n      )\n    },\n    emojy: function () {\n      return import(\n        /* webpackChunkName: \"components/emojy/emojy\" */ \"@/components/emojy/emojy.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    !(_vm.livetype == 5 || _vm.livetype == 8) &&\n    !(_vm.livetype == 2) &&\n    !(_vm.livetype == 3 || _vm.livetype == 6) &&\n    (_vm.livetype == 4 || _vm.livetype == 1) &&\n    _vm.noppt == false\n      ? _vm.__map(_vm.ppts, function (item, index) {\n          var $orig = _vm.__get_orig(item)\n          var g0 = _vm.ppts.length\n          return {\n            $orig: $orig,\n            g0: g0,\n          }\n        })\n      : null\n  var l1 = _vm.__map(_vm.list, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g1 = item.user_type == 1 ? item.length : null\n    return {\n      $orig: $orig,\n      g1: g1,\n    }\n  })\n  var l2 = _vm.__map(_vm.list, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g2 = item.uid === _vm.myID ? item.length : null\n    var g3 = !(item.uid === _vm.myID) ? item.length : null\n    return {\n      $orig: $orig,\n      g2: g2,\n      g3: g3,\n    }\n  })\n  var l3 = _vm.__map(_vm.list, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g4 = item.uid === _vm.myID && item.status == \"1\" ? item.length : null\n    var g5 =\n      !(item.uid === _vm.myID) && (item.status == \"1\" || item.status == \"2\")\n        ? item.length\n        : null\n    return {\n      $orig: $orig,\n      g4: g4,\n      g5: g5,\n    }\n  })\n  var g6 = _vm.ppts.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n        l2: l2,\n        l3: l3,\n        g6: g6,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./live-infoplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./live-infoplay.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- <uni-nav-bar @clickLeft=\"backCourseList\" left-icon=\"back\" :border=\"false\" title=\"直播详情\" onlive>\r\n\t\t</uni-nav-bar> -->\r\n\t\t<view class=\"live-all-wrap\">\r\n\t\t\t<template v-if=\"showsmallvideo == true\">\r\n\t\t\t\t<view class=\"small-video\">\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t<view class=\"video-small-wrap\">\r\n\t\t\t\t\t\t<live-player class=\"video-small-wrap\" autoplay=\"true\" id=\"player\" src=\"wechatliveurl_small\"\r\n\t\t\t\t\t\t\tmode=\"RTC\" bindstatechange=\"playerStateChange\" object-fit=\"contain\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t<view id=\"remoteContainer\" ref=\"remotecontainer\">\r\n\t\t\t\t\t\t<view id=\"subremoteContainer\" class=\"video-small-wrap\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view class=\"video-small-text\">视频直播中</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<template v-if=\"showShareScreen == true\">\r\n\t\t\t\t<view class=\"video-share-wrap\">\r\n\t\t\t\t\t<view id=\"remoteContainer\" ref=\"remotecontainer\">\r\n\t\t\t\t\t\t<view id=\"subremoteContainer\" class=\"video-share-wrap\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<template v-if=\"livetype == 5 || livetype == 8\">\r\n\t\t\t\t<view class=\"video-wrap\" v-if=\"showShareScreen == false\">\r\n\t\t\t\t\t<template v-if=\"phonetype == 1\">\r\n\t\t\t\t\t\t<TestText ref=\"videoAdnroid\" tel=\"xxxxxx\" class=\"video-wrap\"></TestText>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else-if=\"phonetype == 2\">\r\n\t\t\t\t\t\t<dc-TestComponent ref=\"videoIos\" appid=\"xxxxxx\" class=\"video-wrap\"></dc-TestComponent>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else-if=\"phonetype == 3\">\r\n\t\t\t\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t\t\t\t<template v-if=\"showBigScreen == true\">\r\n\t\t\t\t\t\t\t<view class=\"video-wrap\">\r\n\t\t\t\t\t\t\t\t<view id=\"remoteContainer\" ref=\"remotecontainer\">\r\n\t\t\t\t\t\t\t\t\t<view id=\"subremoteContainer\" class=\"video-wrap\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else-if=\"phonetype == 4\">\r\n\t\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t\t<view v-show=\"video_zhezhao == true\" class=\"video-wrap\">\r\n\t\t\t\t\t\t\t<live-player class=\"video-wrap-wechat\" autoplay=\"true\" id=\"player\" src=\"wechatliveurl\"\r\n\t\t\t\t\t\t\t\tmode=\"RTC\" bindstatechange=\"playerStateChange\" object-fit=\"contain\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<view class=\"nothing\" v-if=\"zhibo_leave == true\">\r\n\t\t\t\t\t\t<image v-if=\"show_nothing_image == true\" class=\"nothing_image_H\"\r\n\t\t\t\t\t\t\tsrc=\"../../static/zanshilikai.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t<view v-if=\"show_nothing_image == true\" class=\"zanshilikai_txt_H\">{{zhibo_leave_text}}</view>\r\n\t\t\t\t\t\t<view v-if=\"show_nothing_image == true\" class=\"zanshilikai_txt_H_H\">{{zhibo_leave_text_w}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"show_nothing_image2 == true\" class=\"zanshilikai_txt2_H\">直播已结束</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"livetype == 2\">\r\n\t\t\t\t<view class=\"page-container\">\r\n\t\t\t\t\t<view class=\"video-wrap\">\r\n\t\t\t\t\t\t<video v-show=\"!showEndScreen\" id=\"liveVideo\" class=\"video-element\" :src=\"pull\" :autoplay=\"true\"\r\n\t\t\t\t\t\t\t:controls=\"false\" object-fit=\"cover\" @ended=\"onVideoEnded\" @error=\"onVideoError\"></video>\r\n\r\n\t\t\t\t\t\t<view v-if=\"showEndScreen\" class=\"black-overlay\">\r\n\t\t\t\t\t\t\t<text class=\"end-text\">直播已结束</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"livetype == 3 || livetype == 6\">\r\n\t\t\t\t<view class=\"video-wrap\">\r\n\t\t\t\t\t<image :src=\"thumb\" class=\"video-wrap36\" mode=\"aspectFill\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"shadow\">\r\n\t\t\t\t\t<imt-audio autoplay class=\"imtaudio\" :src=\"pull\"></imt-audio>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else-if=\"livetype == 4 || livetype == 1\">\r\n\t\t\t\t<template v-if=\"noppt == false\">\r\n\t\t\t\t\t<swiper class=\"video-wrap swiper-no-swiping\" :current=\"pptindex\">\r\n\t\t\t\t\t\t<swiper-item v-for=\"(item,index) in ppts\" :key=\"index\" class=\"video-wrap\" @touchmove.stop>\r\n\t\t\t\t\t\t\t<image @click=\"showBigView(index)\" :src=\"item.thumb\" mode=\"aspectFit\" class=\"pptimage\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t<view class=\"pptnum\">{{showppt_index +'/'+ppts.length}}</view>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-else>\r\n\t\t\t\t\t<view class=\"video-wrap\">\r\n\t\t\t\t\t\t<view class=\"zanwu\">暂无内容</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<view class=\"video-wrap\">\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<view class=\"livestatus\">\r\n\t\t\t\t<view class=\"dian\" :style=\"'background-color :' + diancolor\"></view>\r\n\t\t\t\t<view class=\"islive\">{{islive}}</view>\r\n\t\t\t\t<view class=\"xian\"></view>\r\n\t\t\t\t<view class=\"Usercount\">{{Usercount + '人'}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"background-color: #FFFFFF; height: 90rpx;display: none;\"\r\n\t\t\t\tclass=\"flex align-center justify-center font-weight-bold course-tab\">\r\n\t\t\t\t<view class=\"mx-5\" @click=\"changeXXK(index)\" v-for=\"(item, index) in tabBars\" :key=\"index\"\r\n\t\t\t\t\t:class=\"tabIndex === index ? 'text-main font-md' : 'font-md text-light-muted'\">\r\n\t\t\t\t\t{{item.name}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<swiper class=\"swiper-box\" :current=\"tabIndex\" @change=\"onChangeTab\" :style=\"{height : scrollH + 'rpx'}\"\r\n\t\t\t\tstyle=\"width: 100%;background-color: #F4F5F6;\">\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<scroll-view :style=\"{height : scrollH - 130+ 'rpx'}\" class=\"scroll1\" scroll-y=\"true\"\r\n\t\t\t\t\t\t:scroll-into-view=\"scrollInto\" scroll-with-animation style=\"position: absolute;left:0; top: 400; \r\n\t\t\t        right: 0; bottom: 10rrpx;\">\r\n\t\t\t\t\t\t<view class=\"zhinanview\" style=\"display: none;\">\r\n\t\t\t\t\t\t\t<text class=\"zhinantext\">听课指南</text>\r\n\t\t\t\t\t\t\t<text class=\"intr\">{{intr}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view v-if=\"item.user_type == 1\" :id=\"'chat' +index\" class=\"messagebottom\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.avatar\" class=\"rounded\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"message\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"jiangshiview\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"jiangshi\">讲师</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<rich-text v-show=\"item.type == 0\" class=\"textmessage2\"\r\n\t\t\t\t\t\t\t\t\t\t:nodes=\"item.content\"></rich-text>\r\n\t\t\t\t\t\t\t\t\t<view @click=\"open_voice(item.url,index)\" v-show=\"item.type == 1\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"textmessage2_voice\">\r\n\t\t\t\t\t\t\t\t\t\t<image :ref=\"('voice_' + index)\" :src=\"voice_list[index]\" class=\"voice\"></image>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"voice_time\">{{item.length + 's'}}</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text v-if=\"item.status == '1'\" class=\"wen2\">问</text>\r\n\t\t\t\t\t\t\t\t<text v-if=\"item.status == '2'\" class=\"wen2\">答</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<scroll-view :style=\"{height : scrollH - 130 + 'rpx'}\" class=\"scroll1\" scroll-y=\"true\"\r\n\t\t\t\t\t\t:scroll-into-view=\"scrollInto\" scroll-with-animation style=\"position: absolute;left:0; top: 400; \r\n\t\t\t        right: 0; bottom: 10rrpx; \">\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t\t<template v-if=\"item.uid === myID\">\r\n\t\t\t\t\t\t\t\t<view :id=\"'chat' +index\" class=\"messagebottom2\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.avatar\" class=\"rounded2\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"message\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname2\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<rich-text v-show=\"item.type == 0\" class=\"textmessage\" :nodes=\"item.content\"\r\n\t\t\t\t\t\t\t\t\t\t\tspace=\"nbsp\"></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t<view @click=\"open_voice(item.url,index)\" v-show=\"item.type == 1\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"textmessage2_voice_my_my\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :ref=\"('voice_' + index)\" :src=\"voice_list[index]\" class=\"voice_my\">\r\n\t\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_time\">{{item.length + 's'}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '1'\" class=\"wen\">问</text>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '2'\" class=\"wen2\">答</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t<view :id=\"'chat' +index\" class=\"messagebottom\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.avatar\" class=\"rounded\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"message\">\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"item.user_type == 1 || liveInfo.liveuid == item.uid\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"jiangshiview\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"jiangshi\">讲师</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t<rich-text v-show=\"item.type == 0\" class=\"textmessage2\"\r\n\t\t\t\t\t\t\t\t\t\t\t:nodes=\"item.content\"></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t<view @click=\"open_voice(item.url,index)\" v-show=\"item.type == 1\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"textmessage2_voice\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :ref=\"('voice_' + index)\" :src=\"voice_list[index]\" class=\"voice\">\r\n\t\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_time\">{{item.length + 's'}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '1'\" class=\"wen2\">问</text>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '2'\" class=\"wen2\">答</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item>\r\n\t\t\t\t\t<scroll-view :style=\"{height : scrollH + 'rpx'}\" class=\"scroll1\" scroll-y=\"true\"\r\n\t\t\t\t\t\t:scroll-into-view=\"scrollInto\" scroll-with-animation style=\"position: absolute;left:0; top: 400; \r\n\t\t\t\t    right: 0; bottom: 10rrpx; \">\r\n\t\t\t\t\t\t<block v-for=\"(item,index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t\t<template v-if=\"item.uid === myID\">\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.status == '1'\" :id=\"'chat' +index\" class=\"messagebottom2\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.avatar\" class=\"rounded2\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"message\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname2\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t<rich-text class=\"textmessage\" :nodes=\"item.content\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-show=\"item.type == 0\"></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t<view @click=\"open_voice(item.url,index)\" v-show=\"item.type == 1\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"textmessage2_voice_my_my\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :ref=\"('voice_' + index)\" :src=\"voice_list[index]\" class=\"voice_my\">\r\n\t\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_time\">{{item.length + 's'}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '1'\" class=\"wen\">问</text>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '2'\" class=\"wen\">答</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t<view v-if=\"item.status == '1' || item.status == '2'\" :id=\"'chat' +index\"\r\n\t\t\t\t\t\t\t\t\tclass=\"messagebottom\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"item.avatar\" class=\"rounded\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t<view class=\"message\">\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"item.user_type == 1 || liveInfo.liveuid == item.uid\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"jiangshiview\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"jiangshi\">讲师</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"user_nickname\">{{item.user_nickname}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t<rich-text v-show=\"item.type == 0\" class=\"textmessage2\"\r\n\t\t\t\t\t\t\t\t\t\t\t:nodes=\"item.content\"></rich-text>\r\n\t\t\t\t\t\t\t\t\t\t<view @click=\"open_voice(item.url,index)\" v-show=\"item.type == 1\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"textmessage2_voice\">\r\n\t\t\t\t\t\t\t\t\t\t\t<image :ref=\"('voice_' + index)\" :src=\"voice_list[index]\" class=\"voice\">\r\n\t\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"voice_time\">{{item.length + 's'}}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '1'\" class=\"wen2\">问</text>\r\n\t\t\t\t\t\t\t\t\t<text v-if=\"item.status == '2'\" class=\"wen2\">答</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<template v-if=\"tabIndex != 2\">\r\n\t\t\t\t<view class=\"inputbottom\" :style=\"'bottom:' + inputbuttom +'px'\">\r\n\t\t\t\t\t<view class=\"inputclass\">\r\n\t\t\t\t\t\t<image class=\"sendemojy\" @click=\"submitemojy\" src=\"../../static/chat_face.png\"></image>\r\n\t\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t\t<image class=\"sendvoice\" @click=\"sendvoice\" :src=\"chat_voice\"></image>\r\n\t\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t\t<view @touchstart.stop.prevent=\"startVoice\" @touchmove.stop.prevent=\"moveVoice\"\r\n\t\t\t\t\t\t\t@touchend.stop=\"endVoice\" @touchcancel.stop=\"cancelVoice\" class=\"inputborder\"\r\n\t\t\t\t\t\t\tv-if=\"isvoice == true\" style=\"color: #969696;text-align: center; line-height: 80rpx;\">\r\n\t\t\t\t\t\t\t{{voiceTitle}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"inputborder\" v-if=\"isvoice == false\">\r\n\t\t\t\t\t\t\t<input :disabled=\"isshut == false ? false:true\" :adjust-position=\"false\" ref=\"input1\"\r\n\t\t\t\t\t\t\t\thold-keyboard='true' confirm-type=\"send\" @keyup.enter='send' @confirm=\"send\"\r\n\t\t\t\t\t\t\t\tv-model=\"content\" class=\"input\" :placeholder=\"shut_place\" />\r\n\t\t\t\t\t\t\t<view class=\"wen-btn-wrap\" style=\"display: none;\">\r\n\t\t\t\t\t\t\t\t<view @click=\"question\" class=\"duihao-wrap\">\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"isQue == true\" class=\"duihao-img\" src=\"../../../static/jinyan_sel.png\"\r\n\t\t\t\t\t\t\t\t\t\tmode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t\t<image v-if=\"isQue == false\" class=\"duihao-img\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"../../static/images/questionno.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text class=\"tiwen\">提问</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<emojy v-show=\"showemojy == true\" class='emojy' @songemojy='songemojy' @new_sendemojy='new_sendemojy'>\r\n\t\t\t\t</emojy>\r\n\t\t\t</template>\r\n\t\t\t<swiper :current=\"show_big_ppt_index2\" v-show=\"show_big_ppt == true\" class=\"big_swiper\"\r\n\t\t\t\t@change=\"big_change\">\r\n\t\t\t\t<swiper-item v-for=\"(item,index) in ppts\" :key=\"index\" class=\"big_swiper_item\">\r\n\t\t\t\t\t<image :src=\"item.thumb\" mode=\"aspectFit\" class=\"big_swiper_item_image\"></image>\r\n\t\t\t\t\t<view class=\"row\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<view v-show=\"show_big_ppt == true\" :style=\"'top:' + system_ppt_top +'px;'\" class=\"big_pptnum\">\r\n\t\t\t\t{{show_big_ppt_index +'/'+ppts.length}}\r\n\t\t\t</view>\r\n\t\t\t<view v-show=\"show_big_ppt == true\" @click=\"big_ppt_back\" class=\"ppt_big_back_big\"></view>\r\n\t\t\t<image v-show=\"show_big_ppt == true\" @click=\"big_ppt_back\" :style=\"'top:' + system_ppt_top +'px;'\"\r\n\t\t\t\tmode=\"aspectFit\" class=\"ppt_big_back\" src=\"../../static/navi_backImg_white@3x.png\"></image>\r\n\t\t\t<view class=\"voice_an\" v-if=\"recording == true\">\r\n\t\t\t\t<image v-if=\"voiceimagestatus == false\" class=\"voice_an_image\" src=\"../../static/RecordCancel@2x.png\"\r\n\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t<!-- <image  :animation=\"num==0?showpic:hidepic\" v-if=\"voiceimagestatus == true\" class=\"voice_an_image2\" src=\"../../static/RecordingSignal001@2x.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<image  :animation=\"num==1?showpic:hidepic\" v-if=\"voiceimagestatus == true\" class=\"voice_an_image2\" src=\"../../static/RecordingSignal002@2x.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<image  :animation=\"num==2?showpic:hidepic\" v-if=\"voiceimagestatus == true\" class=\"voice_an_image2\" src=\"../../static/RecordingSignal003@2x.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<image  :animation=\"num==3?showpic:hidepic\" v-if=\"voiceimagestatus == true\" class=\"voice_an_image2\" src=\"../../static/RecordingSignal004@2x.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<image  :animation=\"num==4?showpic:hidepic\" v-if=\"voiceimagestatus == true\" class=\"voice_an_image2\" src=\"../../static/RecordingSignal005@2x.png\" mode=\"aspectFit\"></image> -->\r\n\t\t\t\t<image v-if=\"voiceimagestatus == true\" class=\"voice_an_image2\"\r\n\t\t\t\t\tsrc=\"../../static/RecordingSignal006@2x.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<view class=\"text\">{{voiceIconText}}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport qiniuUploader from '../../../qiniuUploader.js';\r\n\timport uniNavBar from '@/components/uni-ui/uni-nav-bar/uni-nav-bar.vue';\r\n\timport imtAudio from '@/components/imt-audio/imt-audio.vue';\r\n\timport unisocket from './uniapp.socketio.js';\r\n\timport md5_js from \"../../../static/js/md53.js\";\r\n\t// #ifdef H5\r\n\timport AgoraRTCH5 from \"./AgoraRTCSDK-3.0.1.js\";\r\n\t// #endif\r\n\t// #ifdef MP-WEIXIN\r\n\timport AogoraWechat from \"./Agora_Miniapp_SDK_for_WeChat.js\";\r\n\t// #endif\r\n\timport Emojy from '@/packageB/emojy/emojy.vue';\r\n\tconst app = getApp();\r\n\tvar socket = '';\r\n\tvar wechatAgora = '';\r\n\tlet H5Client = '';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniNavBar,\r\n\t\t\tEmojy,\r\n\t\t\timtAudio\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlivemode: 0,\r\n\t\t\t\tfromPPt: false,\r\n\t\t\t\tfromshare: false,\r\n\t\t\t\tShareScreenUid: 999999999,\r\n\t\t\t\tRecorder: uni.getRecorderManager(),\r\n\t\t\t\tchat_audio: uni.createInnerAudioContext(),\r\n\t\t\t\trecording: false, //标识是否正在录音\r\n\t\t\t\tisStopVoice: false, //加锁 防止点击过快引起的当录音正在准备(还没有开始录音)的时候,却调用了stop方法但并不能阻止录音的问题\r\n\t\t\t\tvoiceInterval: null,\r\n\t\t\t\tvoiceTime: 0, //总共录音时长\r\n\t\t\t\tcanSend: true, //是否可以发送\r\n\t\t\t\tPointY: 0, //坐标位置\r\n\t\t\t\tvoiceIconText: \"正在录音...\",\r\n\t\t\t\tvoiceimagestatus: true,\r\n\t\t\t\tvoiceTitle: '按住说话',\r\n\t\t\t\tchat_voice: \"../../static/chat_voice@3x.png\",\r\n\t\t\t\tisvoice: false,\r\n\t\t\t\tshow_big_ppt: false,\r\n\t\t\t\tscrollH: 0,\r\n\t\t\t\tsystem_ppt_top: 0,\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\ttabBars: [{\r\n\t\t\t\t\tname: \"讨论区\"\r\n\t\t\t\t}],\r\n\t\t\t\tscrollInto: \"\",\r\n\t\t\t\tscrollTop: \"\",\r\n\t\t\t\tlist: [],\r\n\t\t\t\tisConnectSocket: false, //是否连接socket\r\n\t\t\t\tliveInfo: {\r\n\t\t\t\t\t'liveuid': '',\r\n\t\t\t\t\t'courseid': '',\r\n\t\t\t\t\t'lessonid': ''\r\n\t\t\t\t},\r\n\t\t\t\tuserInfo: {},\r\n\t\t\t\tisQue: false,\r\n\t\t\t\t//直播添加\r\n\t\t\t\tagoraappid: '',\r\n\t\t\t\tagoramRoomName: '',\r\n\t\t\t\tagorauid: '',\r\n\t\t\t\tphonetype: 0,\r\n\t\t\t\twechatliveurl: '',\r\n\t\t\t\tres_url: '',\r\n\t\t\t\twechatliveurl_small: '',\r\n\t\t\t\tmyID: '',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tislive: '已结束',\r\n\t\t\t\tUsercount: 0,\r\n\t\t\t\tdiancolor: '#969696',\r\n\t\t\t\ttimer: '',\r\n\t\t\t\tlivetype: '',\r\n\t\t\t\tintr: '',\r\n\t\t\t\tpull: '',\r\n\t\t\t\tthumb: '',\r\n\t\t\t\tduration: '',\r\n\t\t\t\tcurrentTime: 0,\r\n\t\t\t\tvideoContext: '',\r\n\t\t\t\tbuttonimage: '',\r\n\t\t\t\tstatus: 1,\r\n\t\t\t\tstart: '',\r\n\t\t\t\tend: '',\r\n\t\t\t\tppts: [],\r\n\t\t\t\tnoppt: false,\r\n\t\t\t\tpptindex: 0,\r\n\t\t\t\tshowppt_index: 0,\r\n\t\t\t\tshow_big_ppt_index: 1,\r\n\t\t\t\tshow_big_ppt_index2: 0,\r\n\t\t\t\temojylist: [],\r\n\t\t\t\tshowemojy: false,\r\n\t\t\t\tinputbuttom: 0,\r\n\t\t\t\tshut_place: \"我来说几句~\",\r\n\t\t\t\tisshut: false,\r\n\t\t\t\tshownothingVideo: false,\r\n\t\t\t\tzhibo_leave: false,\r\n\t\t\t\tzhibo_leave_text: '老师暂时离开',\r\n\t\t\t\tzhibo_leave_text_w: '精彩稍后继续',\r\n\t\t\t\tshow_nothing_image: true,\r\n\t\t\t\tshow_nothing_image2: false,\r\n\t\t\t\tinput_adjust: false,\r\n\t\t\t\tvideo_zhezhao: true,\r\n\t\t\t\tvoice_list: [],\r\n\t\t\t\tintervl: '',\r\n\t\t\t\tvoice_index: -1,\r\n\t\t\t\tQiNiutoken: '',\r\n\t\t\t\tvoice_url: '',\r\n\t\t\t\tvoice_length: '',\r\n\t\t\t\tanimation: [],\r\n\t\t\t\tshowpic: '',\r\n\t\t\t\thidepic: '',\r\n\t\t\t\tsetInter1: '',\r\n\t\t\t\tnum: 0,\r\n\t\t\t\tpicmaxnum: 6,\r\n\t\t\t\tisaudioerror: false,\r\n\t\t\t\tshowsmallvideo: false,\r\n\t\t\t\tshowShareScreen: false,\r\n\t\t\t\tshowBigScreen: true,\r\n\t\t\t\tshowEndScreen: false,\r\n\t\t\t\twatchDuration: 0, // 观看总时长（秒）\r\n\t\t\t\twatchTimer: null, // 定时器句柄\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tvar that = this;\r\n\t\t\tthat.system_ppt_top = 25;\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tthat.scrollH = res.windowHeight * 750 / res.windowWidth - 540 - 100;\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\tthat.system_ppt_top = parseInt(res.safeArea.top) + 10;\r\n\t\t\t\t\tthat.scrollH = res.windowHeight * 750 / res.windowWidth - 550 - 124 - parseInt(res.safeArea\r\n\t\t\t\t\t\t.top) - 20;\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tthat.liveLive(that.liveInfo.liveuid, that.liveInfo.courseid, that.liveInfo.lessonid);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// this.pageToBottom();\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tthis.submitWatchDuration();\r\n\t\t\tthis.stopWatchTimer();\r\n\t\t\tthis.chat_audio.stop();\r\n\t\t\tsocket.disconnect();\r\n\t\t\tsocket.close();\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tthis.submitWatchDuration();\r\n\t\t\tthis.stopWatchTimer();\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tthis.saveCurrentUrl();\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tconsole.log(\"运行在小程序\");\r\n\t\t\tthis.phonetype = 4;\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef H5\r\n\t\t\tconsole.log(\"运行在H5\");\r\n\t\t\tthis.phonetype = 3;\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (uni.getSystemInfoSync().platform === 'android') {\r\n\t\t\t\t// console.log(\"运行在android\");\r\n\t\t\t\tthis.phonetype = 1;\r\n\t\t\t} else if (uni.getSystemInfoSync().platform === 'ios') {\r\n\t\t\t\tthis.phonetype = 2;\r\n\t\t\t\t// console.log(\"运行在ios\");\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\r\n\t\t\tif (app.globalData.userinfo == '') {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../../../pages/login/login'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.ppts = [];\r\n\t\t\tthis.userInfo = app.globalData.userinfo;\r\n\t\t\tthis.liveInfo.liveuid = option.liveuid;\r\n\t\t\tthis.liveInfo.courseid = option.courseid;\r\n\t\t\tthis.liveInfo.lessonid = option.lessonid;\r\n\t\t\tthis.thumb = option.thumb;\r\n\t\t\tthis.myID = app.globalData.userinfo.id;\r\n\t\t\tthis.GetChat();\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tif (res.height > 0) {\r\n\t\t\t\t\tif (this.showemojy == true) {\r\n\t\t\t\t\t\tthis.showemojy = false;\r\n\t\t\t\t\t\tthis.inputbuttom = 170;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.inputbuttom = res.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (res.height == 0) {\r\n\t\t\t\t\tif (this.showemojy == true) {\r\n\t\t\t\t\t\tthis.inputbuttom = 170;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.inputbuttom = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t//音频播放事件\r\n\t\t\tthis.chat_audio.onPlay(() => {\r\n\t\t\t\tthis.isaudioerror = false;\r\n\t\t\t\t// console.log('开始播放');\r\n\t\t\t})\r\n\t\t\tthis.chat_audio.onStop(() => {\r\n\t\t\t\tthis.isaudioerror = false;\r\n\t\t\t\tthis.voice_index = -1;\r\n\t\t\t\t// console.log('播放结束-onStop');\r\n\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\tfor (let i = 0; i < this.voice_list.length; i++) {\r\n\t\t\t\t\tthis.voice_list[i] = '../../static/receiver_voice@3x.png';\r\n\t\t\t\t\tthis.$set(this.voice_list, i, this.voice_list[i]);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t//音频结束事件\r\n\t\t\tthis.chat_audio.onEnded(() => {\r\n\t\t\t\tthis.isaudioerror = false;\r\n\t\t\t\tthis.voice_index = -1;\r\n\t\t\t\t// console.log('播放结束-onEnded');\r\n\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\tfor (let i = 0; i < this.voice_list.length; i++) {\r\n\t\t\t\t\tthis.voice_list[i] = '../../static/receiver_voice@3x.png';\r\n\t\t\t\t\tthis.$set(this.voice_list, i, this.voice_list[i]);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.chat_audio.onError((res) => {\r\n\t\t\t\tthis.chat_audio.stop();\r\n\t\t\t\tthis.isaudioerror = true;\r\n\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\t// console.log('播放错误');\r\n\t\t\t\t// console.log(res.errMsg);\r\n\t\t\t\t// console.log(res.errCode);\r\n\t\t\t});\r\n\t\t\t//录音开始事件\r\n\t\t\tthis.Recorder.onStart(e => {\r\n\t\t\t\tthis.beginVoice();\r\n\t\t\t});\r\n\t\t\t//录音结束事件\r\n\t\t\tthis.Recorder.onStop(res => {\r\n\t\t\t\tclearInterval(this.voiceInterval);\r\n\t\t\t\tthis.handleRecorder(res);\r\n\t\t\t});\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsaveCurrentUrl() {\r\n\t\t\t\tlet pages = getCurrentPages();\r\n\t\t\t\tlet currentPage = pages[pages.length - 1];\r\n\t\t\t\tlet route = currentPage.route;\r\n\t\t\t\tlet options = currentPage.options;\r\n\r\n\t\t\t\tlet queryStr = Object.keys(options).map(k => `${k}=${options[k]}`).join('&');\r\n\t\t\t\tlet fullPath = '/' + route + (queryStr ? '?' + queryStr : '');\r\n\r\n\t\t\t\tconsole.log('当前访问地址:', fullPath);\r\n\t\t\t\tapp.globalData.login_jump.page = fullPath;\r\n\t\t\t},\r\n\t\t\tstopPic() {\r\n\t\t\t\tclearInterval(this.setInter1);\r\n\t\t\t},\r\n\t\t\tonVideoEnded() {\r\n\r\n\t\t\t\tthis.showEndScreen = true; // 延迟避免事件阻塞\r\n\t\t\t\tthis.stopWatchTimer();\r\n\t\t\t\tconsole.log('视频播放完毕');\r\n\t\t\t\t//\tuni.hideLoading() // 隐藏可能的加载提示\r\n\t\t\t},\r\n\t\t\ttartWatchTimer() {\r\n\t\t\t\tif (this.watchTimer) clearInterval(this.watchTimer);\r\n\t\t\t\tthis.watchDuration = 0;\r\n\t\t\t\tthis.watchTimer = setInterval(() => {\r\n\t\t\t\t\tthis.watchDuration += 1;\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\tstopWatchTimer() {\r\n\t\t\t\tif (this.watchTimer) {\r\n\t\t\t\t\tclearInterval(this.watchTimer);\r\n\t\t\t\t\tthis.watchTimer = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubmitWatchDuration() {\r\n\t\t\t\tconst gData = getApp().globalData;\r\n\t\t\t\t// 若时长为0，跳过提交\r\n\t\t\t\tif (this.watchDuration === 0) {\r\n\t\t\t\t\tconsole.warn('观看时长:', this.watchDuration);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: gData.site_url + 'Live.SubmitWatchDuration', // ✅ 你需要确认这个接口名\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuid: gData.userinfo.id,\r\n\t\t\t\t\t\ttoken: gData.userinfo.token,\r\n\t\t\t\t\t\tliveuid: this.liveInfo.liveuid,\r\n\t\t\t\t\t\tcourseid: this.liveInfo.courseid,\r\n\t\t\t\t\t\tlessonid: this.liveInfo.lessonid,\r\n\t\t\t\t\t\tduration: this.watchDuration\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log('✅ 观看时长提交成功:', this.watchDuration + '秒');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.warn('❌ 观看时长提交失败:', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchangePic() { //轮播方法\r\n\t\t\t\tclearInterval(this.setInter1);\r\n\t\t\t\tvar animation = uni.createAnimation({\r\n\t\t\t\t\ttimingFunction: 'ease',\r\n\t\t\t\t\tduration: 4000,\r\n\t\t\t\t\tdelay: 0,\r\n\t\t\t\t});\r\n\t\t\t\tthis.animation = animation;\r\n\t\t\t\tthis.setInter1 = setInterval(() => {\r\n\t\t\t\t\tthis.num++;\r\n\t\t\t\t\tif (this.num == this.picmaxnum) {\r\n\t\t\t\t\t\tthis.num = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tanimation.opacity(1).step({\r\n\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\tdelay: 1000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showpic = animation.export();\r\n\t\t\t\t\tanimation.opacity(0).step({\r\n\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\tdelay: 1000\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.hidepic = animation.export();\r\n\t\t\t\t}, 4000);\r\n\t\t\t},\r\n\t\t\t//准备开始录音\r\n\t\t\tstartVoice(e) {\r\n\t\t\t\tthis.chat_audio.pause();\r\n\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\tfor (let i = 0; i < this.voice_list.length; i++) {\r\n\t\t\t\t\tthis.voice_list[i] = '../../static/receiver_voice@3x.png';\r\n\t\t\t\t\tthis.$set(this.voice_list, i, this.voice_list[i]);\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: getApp().globalData.site_url + 'Upload.GetQiniuToken',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t'uid': getApp().globalData.userinfo.id,\r\n\t\t\t\t\t\t'token': getApp().globalData.userinfo.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tif (res.data.data.code == 0) {\r\n\t\t\t\t\t\t\tthis.QiNiutoken = this.decypt(res.data.data.info[0].token);\r\n\t\t\t\t\t\t\tthis.recording = true;\r\n\t\t\t\t\t\t\tthis.isStopVoice = false;\r\n\t\t\t\t\t\t\tthis.canSend = true;\r\n\t\t\t\t\t\t\tthis.voiceIconText = \"正在录音...\"\r\n\t\t\t\t\t\t\tthis.voiceimagestatus = true;\r\n\t\t\t\t\t\t\tthis.PointY = e.touches[0].clientY;\r\n\t\t\t\t\t\t\tthis.Recorder.start({\r\n\t\t\t\t\t\t\t\tformat: 'mp3'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请重试',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//录音已经开始\r\n\t\t\tbeginVoice() {\r\n\t\t\t\tif (this.isStopVoice) {\r\n\t\t\t\t\tthis.Recorder.stop();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.voiceTitle = '松开 结束'\r\n\t\t\t\tthis.voiceInterval = setInterval(() => {\r\n\t\t\t\t\tthis.voiceTime++;\r\n\t\t\t\t}, 1000)\r\n\t\t\t},\r\n\t\t\t//move 正在录音中\r\n\t\t\tmoveVoice(e) {\r\n\t\t\t\tconst PointY = e.touches[0].clientY\r\n\t\t\t\tconst slideY = this.PointY - PointY;\r\n\t\t\t\tif (slideY > uni.upx2px(120)) {\r\n\t\t\t\t\tthis.canSend = false;\r\n\t\t\t\t\tthis.voiceIconText = '松开手指 取消发送 '\r\n\t\t\t\t\tthis.voiceTitle = '手指上滑 取消发送 '\r\n\t\t\t\t\tthis.voiceimagestatus = false;\r\n\t\t\t\t\tthis.stopPic();\r\n\t\t\t\t} else if (slideY > uni.upx2px(60)) {\r\n\t\t\t\t\tthis.canSend = false;\r\n\t\t\t\t\tthis.voiceTitle = '手指上滑 取消发送 '\r\n\t\t\t\t\tthis.voiceIconText = '手指上滑 取消发送 '\r\n\t\t\t\t\tthis.voiceimagestatus = false;\r\n\t\t\t\t\tthis.stopPic();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.canSend = true;\r\n\t\t\t\t\tthis.voiceIconText = '正在录音...'\r\n\t\t\t\t\tthis.voiceTitle = '松开结束'\r\n\t\t\t\t\tthis.voiceimagestatus = true;\r\n\t\t\t\t\tthis.changePic();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//结束录音\r\n\t\t\tendVoice() {\r\n\t\t\t\tthis.stopPic();\r\n\t\t\t\tthis.inputbuttom = 0;\r\n\t\t\t\tthis.isStopVoice = true; //加锁 确保已经结束录音并不会录制\r\n\t\t\t\tthis.Recorder.stop();\r\n\t\t\t\tthis.voiceTitle = '按住 说话'\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t},\r\n\t\t\t//录音被打断\r\n\t\t\tcancelVoice(e) {\r\n\t\t\t\tthis.stopPic();\r\n\t\t\t\tthis.inputbuttom = 0;\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\tthis.voiceTitle = '按住 说话';\r\n\t\t\t\tthis.canSend = false;\r\n\t\t\t\tthis.Recorder.stop();\r\n\t\t\t},\r\n\t\t\t//处理录音文件\r\n\t\t\thandleRecorder({\r\n\t\t\t\ttempFilePath,\r\n\t\t\t\tduration\r\n\t\t\t}) {\r\n\t\t\t\tif (this.canSend == false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet contentDuration;\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\tconsole.log(duration);\r\n\t\t\t\tif (duration < 1500) {\r\n\t\t\t\t\tthis.voiceIconText = \"说话时间过短\";\r\n\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t\tthis.inputbuttom = 0;\r\n\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\t\tthis.voiceTitle = '按住 说话';\r\n\t\t\t\t\tthis.canSend = false;\r\n\t\t\t\t\tthis.Recorder.stop();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcontentDuration = duration / 1000;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tcontentDuration = this.voiceTime + 1;\r\n\t\t\t\tthis.voiceTime = 0;\r\n\t\t\t\tif (contentDuration <= 0) {\r\n\t\t\t\t\tthis.voiceIconText = \"说话时间过短\";\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.recording = false;\r\n\t\t\t\t\t}, 200)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t};\r\n\t\t\t\t// #endif\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tvar name = 'voice_knowledge' + this.getTime() + '.wav';\r\n\t\t\t\tqiniuUploader.upload(tempFilePath, res => {\r\n\t\t\t\t\t// if (res.fileUrl.indexOf(\"undefined\") != -1) {\r\n\t\t\t\t\t// console.log('上传成功，但url含 undefined');\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ttitle: '出现错误，请重新录制语音',\r\n\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t// });\r\n\t\t\t\t\t// return;\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// console.log('上传成功');\r\n\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\tthis.voice_url = res.fileUrl;\r\n\t\t\t\t\tthis.voice_length = Math.ceil(contentDuration);\r\n\t\t\t\t\tthis.send();\r\n\t\t\t\t}, error => {\r\n\t\t\t\t\tconsole.log('上传失败');\r\n\t\t\t\t}, {\r\n\t\t\t\t\tregion: 'ECN',\r\n\t\t\t\t\tdomain: app.globalData.qiniuimageurl,\r\n\t\t\t\t\tkey: name,\r\n\t\t\t\t\tuptoken: this.QiNiutoken,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbig_change(event) {\r\n\t\t\t\tthis.show_big_ppt_index = parseInt(event.detail.current) + 1;\r\n\t\t\t\tthis.show_big_ppt_index2 = parseInt(event.detail.current);\r\n\t\t\t},\r\n\t\t\tbig_ppt_back() {\r\n\t\t\t\tthis.show_big_ppt = false;\r\n\t\t\t},\r\n\t\t\tgetTime() {\r\n\t\t\t\tlet yy = new Date().getFullYear();\r\n\t\t\t\tlet mm = new Date().getMonth() + 1;\r\n\t\t\t\tlet dd = new Date().getDate();\r\n\t\t\t\tlet hh = new Date().getHours();\r\n\t\t\t\tlet mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();\r\n\t\t\t\tlet ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();\r\n\t\t\t\treturn yy + mm + dd + hh + mf + ss;\r\n\t\t\t},\r\n\t\t\tbackCourseList() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '是否要退出直播间',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tshowCancel: true,\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\tconfirmColor: '#2C62EF',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t// uni.showLoading({\r\n\t\t\t\t\t\t\t// \ttitle:null\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\tsocket.disconnect();\r\n\t\t\t\t\t\t\tsocket.close();\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {},\r\n\t\t\t\t\tcomplete: () => {}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\topen_voice(url, index) {\r\n\t\t\t\tthis.chat_audio.pause();\r\n\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\tfor (let i = 0; i < this.voice_list.length; i++) {\r\n\t\t\t\t\tthis.voice_list[i] = '../../static/receiver_voice@3x.png';\r\n\t\t\t\t\tthis.$set(this.voice_list, i, this.voice_list[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.voice_index == index) {\r\n\t\t\t\t\tthis.voice_index = -1;\r\n\t\t\t\t\tconsole.log('手动停止');\r\n\t\t\t\t\tthis.chat_audio.pause();\r\n\t\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(url);\r\n\t\t\t\t\tif (url.indexOf(\"undefined\") != -1) {\r\n\t\t\t\t\t\tthis.voice_index = -1;\r\n\t\t\t\t\t\tconsole.log('url出现错误，停止播放');\r\n\t\t\t\t\t\tthis.chat_audio.pause();\r\n\t\t\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.chat_audio.src = url;\r\n\t\t\t\t\tthis.chat_audio.play();\r\n\t\t\t\t\tthis.voice_index = index;\r\n\t\t\t\t\tthis.intervl = setInterval(() => {\r\n\t\t\t\t\t\tconsole.log('启动');\r\n\t\t\t\t\t\tthis.voice_list[index] = '../../static/receiver_voice_play_1@3x.png';\r\n\t\t\t\t\t\tthis.$set(this.voice_list, index, this.voice_list[index]);\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.voice_list[index] = '../../static/receiver_voice_play_2@3x.png';\r\n\t\t\t\t\t\t\tthis.$set(this.voice_list, index, this.voice_list[index]);\r\n\t\t\t\t\t\t}, 200);\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.voice_list[index] = '../../static/receiver_voice_play_3@3x.png';\r\n\t\t\t\t\t\t\tthis.$set(this.voice_list, index, this.voice_list[index]);\r\n\t\t\t\t\t\t}, 400);\r\n\t\t\t\t\t}, 600);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isaudioerror == true) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '1'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.chat_audio.stop();\r\n\t\t\t\t\tclearInterval(this.intervl);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddNodeListen() {\r\n\t\t\t\tsocket = new unisocket((app.globalData.socket_url), {\r\n\t\t\t\t\tquery: {},\r\n\t\t\t\t\ttransports: ['websocket', 'polling'],\r\n\t\t\t\t\ttimeout: 5000\r\n\t\t\t\t});\r\n\t\t\t\tsocket.emit('conn', {\r\n\t\t\t\t\tuid: this.userInfo.id, //进入该房间的学生id 假如等于下面的房间id, 那即为老师进入房间\r\n\t\t\t\t\troomnum: this.liveInfo.liveuid, //房间号,即老师id\r\n\t\t\t\t\tnickname: this.userInfo.user_nickname,\r\n\t\t\t\t\tstream: this.liveInfo.liveuid + '_' + this.liveInfo.courseid + '_' + this.liveInfo\r\n\t\t\t\t\t\t.lessonid, //老师id_课程id_课时id\r\n\t\t\t\t\ttoken: this.userInfo.token,\r\n\t\t\t\t});\r\n\t\t\t\tsocket.on('error', (data) => {\r\n\t\t\t\t\tconsole.log('ws 失败 ' + data);\r\n\t\t\t\t});\r\n\t\t\t\tsocket.on('conn', (data) => {\r\n\t\t\t\t\tconsole.log('ws 已连接 ' + data);\r\n\t\t\t\t\tif (data == 'no') {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '聊天服务器连接失败',\r\n\t\t\t\t\t\t\tcontent: '请尝试退出直播间重新进入',\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\tcancelText: '',\r\n\t\t\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\t\t\tconfirmColor: '#38DAA6',\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {},\r\n\t\t\t\t\t\t\tcomplete: () => {}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.isConnectSocket = true; //已连接\r\n\t\t\t\t});\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tsocket.on('broadcastingListen', (data) => {\r\n\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\tfor (let i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\tlet msgInfo = JSON.parse(data[i]).msg[0];\r\n\t\t\t\t\t\t//console.log(JSON.parse(JSON.stringify(msgInfo)));\r\n\t\t\t\t\t\tif (msgInfo._method_ == \"changeMode\") {\r\n\t\t\t\t\t\t\tif (msgInfo.action == 1) {\r\n\t\t\t\t\t\t\t\tconsole.log('切换到PPt');\r\n\t\t\t\t\t\t\t\tthis.livetype = 4;\r\n\t\t\t\t\t\t\t\tthis.fromPPt = true;\r\n\t\t\t\t\t\t\t\tthis.fromshare = false;\r\n\t\t\t\t\t\t\t\tthis.showsmallvideo = true;\r\n\t\t\t\t\t\t\t\tthis.showShareScreen = false;\r\n\t\t\t\t\t\t\t\tthis.scrollH -= 150;\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\tthis.wechatliveurl_small = this.res_url;\r\n\t\t\t\t\t\t\t\tthis.wechatliveurl = '';\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\tthis.showBigScreen = false;\r\n\t\t\t\t\t\t\t\tH5Client.leave();\r\n\t\t\t\t\t\t\t\tthis.agoraH5(this.agoraappid, this.agoramRoomName);\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t} else if (msgInfo.action == 0) {\r\n\t\t\t\t\t\t\t\tconsole.log('切换到直播');\r\n\t\t\t\t\t\t\t\tif (this.fromshare == false && this.fromPPt == true) {\r\n\t\t\t\t\t\t\t\t\tthis.scrollH += 150;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.livetype = 5;\r\n\t\t\t\t\t\t\t\tthis.fromPPt = false;\r\n\t\t\t\t\t\t\t\tthis.fromshare = false;\r\n\t\t\t\t\t\t\t\tthis.showsmallvideo = false;\r\n\t\t\t\t\t\t\t\tthis.showShareScreen = false;\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\tthis.wechatliveurl_small = '';\r\n\t\t\t\t\t\t\t\tthis.wechatliveurl = this.res_url;\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\tthis.showBigScreen = true;\r\n\t\t\t\t\t\t\t\tH5Client.leave();\r\n\t\t\t\t\t\t\t\tthis.agoraH5(this.agoraappid, this.agoramRoomName);\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t} else if (msgInfo.action == 2) {\r\n\t\t\t\t\t\t\t\tconsole.log('切换到屏幕共享');\r\n\t\t\t\t\t\t\t\t//屏幕共享\r\n\t\t\t\t\t\t\t\tif (this.fromPPt == true) {\r\n\t\t\t\t\t\t\t\t\tthis.scrollH += 150;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.livetype = 5;\r\n\t\t\t\t\t\t\t\tthis.fromshare = true;\r\n\t\t\t\t\t\t\t\tthis.showShareScreen = true;\r\n\t\t\t\t\t\t\t\tthis.showsmallvideo = false;\r\n\t\t\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t\t\tthis.wechatliveurl_small = '';\r\n\t\t\t\t\t\t\t\tthis.wechatliveurl = this.res_url;\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\tthis.showBigScreen = false;\r\n\t\t\t\t\t\t\t\tH5Client.leave();\r\n\t\t\t\t\t\t\t\tthis.agoraH5(this.agoraappid, this.agoramRoomName);\r\n\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == \"Kick\") {\r\n\t\t\t\t\t\t\t//踢出直播间\r\n\t\t\t\t\t\t\tif (msgInfo.action == 1) {\r\n\t\t\t\t\t\t\t\tif (msgInfo.touid == getApp().globalData.userinfo.id) {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '你已被讲师踢出房间',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\t\t\t\tdelta: 1\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == \"StartEndLive\") {\r\n\t\t\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t\t\t\tthis.video_zhezhao = true;\r\n\t\t\t\t\t\t\tthis.show_nothing_image = false;\r\n\t\t\t\t\t\t\tthis.show_nothing_image2 = true;\r\n\t\t\t\t\t\t\tthis.zhibo_leave_text = \"直播已结束\";\r\n\t\t\t\t\t\t\tthis.zhibo_leave_text_w = \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == \"roomShutup\") {\r\n\t\t\t\t\t\t\t//App.Course.SetLesson\r\n\t\t\t\t\t\t\t//1 禁言 0 解除\r\n\t\t\t\t\t\t\tif (msgInfo.action == 1) {\r\n\t\t\t\t\t\t\t\tthis.shut_place = \"全体禁言中\";\r\n\t\t\t\t\t\t\t\tthis.content = \"\"\r\n\t\t\t\t\t\t\t\tthis.isshut = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.shut_place = \"我来说几句～\";\r\n\t\t\t\t\t\t\t\tthis.content = '';\r\n\t\t\t\t\t\t\t\tthis.isshut = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == \"Shutup\") {\r\n\t\t\t\t\t\t\tif (msgInfo.touid == getApp().globalData.userinfo.id) {\r\n\t\t\t\t\t\t\t\tthis.shut_place = \"你已被禁言\";\r\n\t\t\t\t\t\t\t\tthis.isshut = true;\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '你已被禁言',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == \"SendMsg\") {\r\n\t\t\t\t\t\t\tif (msgInfo.action == 0) {\r\n\t\t\t\t\t\t\t\t// if (msgInfo.ct.uid != getApp().globalData.userinfo.id) {\r\n\t\t\t\t\t\t\t\tthis.Usercount += 1;\r\n\t\t\t\t\t\t\t\tconsole.log('用户进入');\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar pinyinArray = getApp().globalData.pinyinArray;\r\n\t\t\t\t\t\t\t\tvar emojiArray = getApp().globalData.emojiArray;\r\n\t\t\t\t\t\t\t\tvar biaoqing_url = getApp().globalData.biaoqingurl;\r\n\t\t\t\t\t\t\t\tvar content = msgInfo.content;\r\n\t\t\t\t\t\t\t\tif (msgInfo.type == 0) {\r\n\t\t\t\t\t\t\t\t\tfor (let j = 0; j < 50; j++) {\r\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < emojiArray.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar path = getApp().globalData.biaoqingurl + pinyinArray[i];\r\n\t\t\t\t\t\t\t\t\t\t\tcontent = content.replace(emojiArray[i],\r\n\t\t\t\t\t\t\t\t\t\t\t\t'<img style=\"width: 25px; height: 25px; vertical-align: middle;\" src =\"' +\r\n\t\t\t\t\t\t\t\t\t\t\t\tpath + '\"/>'\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.voice_list.push('../../static/receiver_voice@3x.png');\r\n\t\t\t\t\t\t\t\tmsgInfo.content = content;\r\n\t\t\t\t\t\t\t\tthis.list.push(msgInfo);\r\n\t\t\t\t\t\t\t\tthis.pageToBottom();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == 'disconnect') {\r\n\t\t\t\t\t\t\tif (this.Usercount != 0) {\r\n\t\t\t\t\t\t\t\tthis.Usercount -= 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log('用户离开');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (msgInfo._method_ == 'setPPT') {\r\n\t\t\t\t\t\t\tif (msgInfo.action == 0) {\r\n\t\t\t\t\t\t\t\tvar item = {\r\n\t\t\t\t\t\t\t\t\t'id': msgInfo.pptid,\r\n\t\t\t\t\t\t\t\t\t'thumb': msgInfo.thumb\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tthis.noppt = false;\r\n\t\t\t\t\t\t\t\tthis.ppts.push(item);\r\n\t\t\t\t\t\t\t\tconsole.log('添加ppt');\r\n\t\t\t\t\t\t\t} else if (msgInfo.action == 1) {\r\n\t\t\t\t\t\t\t\tconsole.log('ppt删除');\r\n\t\t\t\t\t\t\t\tvar pptlist = this.ppts;\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < pptlist.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar item = pptlist[i];\r\n\t\t\t\t\t\t\t\t\tif (item.id == msgInfo.pptid) {\r\n\t\t\t\t\t\t\t\t\t\tthis.ppts.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (this.ppts.length == 0) {\r\n\t\t\t\t\t\t\t\t\tthis.noppt = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (msgInfo.action == 2) {\r\n\t\t\t\t\t\t\t\tthis.pptindex = parseInt(msgInfo.index);\r\n\t\t\t\t\t\t\t\tthis.showppt_index = this.pptindex + 1;\r\n\t\t\t\t\t\t\t\tconsole.log('ppt切换索引');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshowBigView(index) {\r\n\t\t\t\tthis.show_big_ppt = true;\r\n\t\t\t\tthis.show_big_ppt_index = index + 1;\r\n\t\t\t\tthis.show_big_ppt_index2 = index;\r\n\t\t\t},\r\n\t\t\tsongemojy(data) {\r\n\t\t\t\tthis.content += data.chinese;\r\n\t\t\t},\r\n\t\t\tGetChat() {\r\n\t\t\t\tlet gData = app.globalData;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: gData.site_url + 'Live.GetChat',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t'uid': gData.userinfo.id,\r\n\t\t\t\t\t\t'token': gData.userinfo.token,\r\n\t\t\t\t\t\t'liveuid': this.liveInfo.liveuid,\r\n\t\t\t\t\t\t'courseid': this.liveInfo.courseid,\r\n\t\t\t\t\t\t'lessonid': this.liveInfo.lessonid,\r\n\t\t\t\t\t\t'lastid': '',\r\n\t\t\t\t\t\t'type': '0'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tvar pinyinArray = getApp().globalData.pinyinArray;\r\n\t\t\t\t\t\tvar emojiArray = getApp().globalData.emojiArray;\r\n\t\t\t\t\t\tthis.list = res.data.data.info;\r\n\t\t\t\t\t\tthis.tartWatchTimer();\r\n\t\t\t\t\t\tfor (let j = 0; j < this.list.length; j++) {\r\n\t\t\t\t\t\t\tvar msg = this.list[j];\r\n\t\t\t\t\t\t\tvar content = msg.content;\r\n\t\t\t\t\t\t\tif (msg.type == 0) {\r\n\t\t\t\t\t\t\t\tfor (let j = 0; j < 50; j++) {\r\n\t\t\t\t\t\t\t\t\tfor (let i = 0; i < emojiArray.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tvar path = getApp().globalData.biaoqingurl + pinyinArray[i];\r\n\t\t\t\t\t\t\t\t\t\tcontent = content.replace(emojiArray[i],\r\n\t\t\t\t\t\t\t\t\t\t\t'<img style=\"width: 25px; height: 25px; vertical-align: middle;\" src =\"' +\r\n\t\t\t\t\t\t\t\t\t\t\tpath + '\"/>'\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.voice_list.push('../../static/receiver_voice@3x.png');\r\n\t\t\t\t\t\t\tmsg.content = content;\r\n\t\t\t\t\t\t\tthis.list[j] = msg;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync changeXXK(index) {\r\n\t\t\t\tthis.tabIndex = index;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.pageToBottom();\r\n\t\t\t\t}, 300);\r\n\t\t\t\treturn this.tabIndex;\r\n\t\t\t},\r\n\t\t\tonChangeTab(e) {\r\n\t\t\t\tthis.tabIndex = e.detail.current;\r\n\t\t\t\tthis.pageToBottom();\r\n\t\t\t},\r\n\t\t\tdecypt(code) {\r\n\t\t\t\tvar newcode = '';\r\n\t\t\t\tvar str = '1ecxXyLRB.COdrAi:q09Z62ash-QGn8VFNIlb=fM/D74WjS_EUzYuw?HmTPvkJ3otK5gp&';\r\n\t\t\t\tfor (var i = 0; i < code.length; i++) {\r\n\t\t\t\t\tvar codeIteam = code[i];\r\n\t\t\t\t\tfor (var j = 0; j < str.length; j++) {\r\n\t\t\t\t\t\tvar stringIteam = str[j];\r\n\t\t\t\t\t\tif (codeIteam == stringIteam) {\r\n\t\t\t\t\t\t\tif (j == 0) {\r\n\t\t\t\t\t\t\t\tnewcode += str[str.length - 1];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewcode += str[j - 1];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn newcode;\r\n\t\t\t},\r\n\t\t\tagoraWechat(agoraappid, agorastream, uid) {\r\n\t\t\t\tthis.video_zhezhao = true;\r\n\t\t\t\tvar _that = this;\r\n\t\t\t\t//初始化\r\n\t\t\t\twechatAgora = new AogoraWechat.Client();\r\n\t\t\t\twechatAgora.setRole('audience');\r\n\t\t\t\twechatAgora.init(this.decypt(agoraappid), () => {\r\n\t\t\t\t\t\tconsole.log('小程序初始化成功');\r\n\t\t\t\t\t\t//加入通道\r\n\t\t\t\t\t\twechatAgora.join('', agorastream, uid, () => {\r\n\t\t\t\t\t\t\tconsole.log('加入通道成功');\r\n\t\t\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t\t\t}, e => {\r\n\t\t\t\t\t\t\tconsole.log('加入通道失败');\r\n\t\t\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\te => {\r\n\t\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t\t\tconsole.log('小程序初始化失败');\r\n\t\t\t\t\t});\r\n\t\t\t\t//订阅远端流\r\n\t\t\t\twechatAgora.on(\"stream-added\", e => {\r\n\t\t\t\t\twechatAgora.subscribe(e.uid, (res) => {\r\n\t\t\t\t\t\tthis.zhibo_leave = false;\r\n\t\t\t\t\t\tthis.video_zhezhao = true;\r\n\t\t\t\t\t\tconsole.log(\"订阅视频流成功：\" + res);\r\n\t\t\t\t\t\tthis.res_url = res;\r\n\t\t\t\t\t\tif (this.showsmallvideo == true) {\r\n\t\t\t\t\t\t\tthis.wechatliveurl_small = res;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.wechatliveurl = res;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, (err) => {\r\n\t\t\t\t\t\tconsole.log(\"订阅视频流错误\", err);\r\n\t\t\t\t\t\tthis.video_zhezhao = false;\r\n\t\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\twechatAgora.on(\"stream-removed\", e => {\r\n\t\t\t\t\tthis.video_zhezhao = false;\r\n\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t});\r\n\t\t\t\t//重连机制\r\n\t\t\t\twechatAgora.rejoin('', agorastream, uid, '', () => {\r\n\t\t\t\t\tconsole.log('重连加入通道成功');\r\n\t\t\t\t}, e => {\r\n\t\t\t\t\tconsole.log('重连加入通道失败');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tagoraH5(agoraappid, agorastream) {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tvar _this = this;\r\n\r\n\t\t\t\tH5Client = AgoraRTCH5.createClient({\r\n\t\t\t\t\tmode: \"live\",\r\n\t\t\t\t\tcodec: \"vp8\",\r\n\t\t\t\t});\r\n\t\t\t\tAgoraRTCH5.client = H5Client;\r\n\t\t\t\tH5Client.init(_this.decypt(agoraappid));\r\n\t\t\t\tH5Client.setClientRole('audience');\r\n\t\t\t\tH5Client.join(\"\", agorastream, null, (uid) => {\r\n\t\t\t\t\tconsole.log('加入通道成功');\r\n\t\t\t\t\t_this.zhibo_leave = true;\r\n\t\t\t\t}, null);\r\n\r\n\t\t\t\tH5Client.on(\"stream-added\", function(evt) {\r\n\t\t\t\t\tH5Client.subscribe(evt.stream, null);\r\n\t\t\t\t\t_this.zhibo_leave = false;\r\n\t\t\t\t});\r\n\t\t\t\tH5Client.on(\"stream-subscribed\", function(evt) {\r\n\t\t\t\t\tconsole.log('获取到视频流');\r\n\t\t\t\t\tlet stream = evt.stream;\r\n\t\t\t\t\tlet streamId = String(stream.getId());\r\n\t\t\t\t\tlet streamview = document.getElementById(\"subremoteContainer\");\r\n\t\t\t\t\tstreamview.id = streamId;\r\n\t\t\t\t\tdocument.getElementById(\"remoteContainer\").appendChild(streamview);\r\n\t\t\t\t\tstream.play(streamId);\r\n\t\t\t\t});\r\n\t\t\t\tH5Client.on(\"stream-removed\", function(evt) {\r\n\t\t\t\t\t//_this.zhibo_leave = true;\r\n\t\t\t\t\t//let stream = evt.stream;\r\n\t\t\t\t\t// let streamId = String(stream.getId());\r\n\t\t\t\t\t//\tstream.close();\r\n\t\t\t\t\t// removeVideoStream(streamId);\r\n\t\t\t\t});\r\n\t\t\t\tH5Client.on(\"peer-leave\", function(evt) {\r\n\t\t\t\t\t_this.zhibo_leave = true;\r\n\t\t\t\t\tlet stream = evt.stream;\r\n\t\t\t\t\tlet streamId = String(stream.getId());\r\n\t\t\t\t\tstream.close();\r\n\t\t\t\t\tremoveVideoStream(streamId);\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t// 进入直播\r\n\t\t\tliveLive(liveuid, courseid, lessonid) {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tlet gData = app.globalData;\r\n\t\t\t\t_this.agorauid = gData.userinfo.id;\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: gData.site_url + 'Live.Enter',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t'liveuid': liveuid,\r\n\t\t\t\t\t\t'courseid': courseid,\r\n\t\t\t\t\t\t'lessonid': lessonid,\r\n\t\t\t\t\t\t'token': gData.userinfo.token,\r\n\t\t\t\t\t\t'uid': gData.userinfo.id,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.data.data.code == 700) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: '../../../pages/login/login',\r\n\t\t\t\t\t\t\t\tsuccess: res => {},\r\n\t\t\t\t\t\t\t\tfail: () => {},\r\n\t\t\t\t\t\t\t\tcomplete: () => {}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (res.data.data.code == 0) {\r\n\t\t\t\t\t\t\tthis.addNodeListen();\r\n\t\t\t\t\t\t\tthis.pull = this.decypt(res.data.data.info[0].pull);\r\n\t\t\t\t\t\t\tthis.ppts = res.data.data.info[0].ppts || [];\r\n\t\t\t\t\t\t\tif (this.ppts.length == 0) {\r\n\t\t\t\t\t\t\t\tthis.noppt = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.noppt = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (parseInt(res.data.data.info[0].shutup_room) == 1) {\r\n\t\t\t\t\t\t\t\tthis.shut_place = \"全体禁言中\";\r\n\t\t\t\t\t\t\t\tthis.content = \"\"\r\n\t\t\t\t\t\t\t\tthis.isshut = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.shut_place = \"我来说几句～\";\r\n\t\t\t\t\t\t\t\tthis.content = '';\r\n\t\t\t\t\t\t\t\tthis.isshut = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.pptindex = parseInt(res.data.data.info[0].pptindex);\r\n\t\t\t\t\t\t\tthis.showppt_index = this.pptindex + 1;\r\n\t\t\t\t\t\t\tthis.userInfo.user_type = res.data.data.info[0].user_type;\r\n\t\t\t\t\t\t\tlet isLive = res.data.data.info[0].islive;\r\n\t\t\t\t\t\t\tif (isLive == 0) {\r\n\t\t\t\t\t\t\t\tthis.shownothingVideo = true;\r\n\t\t\t\t\t\t\t\tthis.islive = '未开始';\r\n\t\t\t\t\t\t\t\tthis.diancolor = '#969696';\r\n\t\t\t\t\t\t\t} else if (isLive == 1) {\r\n\t\t\t\t\t\t\t\tthis.shownothingVideo = false;\r\n\t\t\t\t\t\t\t\tthis.islive = '直播中';\r\n\t\t\t\t\t\t\t\tthis.diancolor = '#2C62EF';\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.islive = '已结束';\r\n\t\t\t\t\t\t\t\tthis.zhibo_leave = true;\r\n\t\t\t\t\t\t\t\tthis.show_nothing_image = false;\r\n\t\t\t\t\t\t\t\tthis.show_nothing_image2 = true;\r\n\t\t\t\t\t\t\t\tthis.zhibo_leave_text = '直播已结束';\r\n\t\t\t\t\t\t\t\tthis.zhibo_leave_text_w = \"\";\r\n\t\t\t\t\t\t\t\tthis.diancolor = '#969696';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.intr = res.data.data.info[0].intr;\r\n\t\t\t\t\t\t\t//1图文2视频3音频 4ppt直播 5视频直播6音频直播 7授课直播（白板）\r\n\t\t\t\t\t\t\tthis.livetype = res.data.data.info[0].livetype;\r\n\t\t\t\t\t\t\tif (this.livetype == 3 || this.livetype == 6) {\r\n\t\t\t\t\t\t\t\tthis.videoContext = uni.createVideoContext('myVideo');\r\n\t\t\t\t\t\t\t\tthis.buttonimage = '../../static/voice2.png';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.Usercount = parseInt(res.data.data.info[0].nums);\r\n\t\t\t\t\t\t\tthis.agoraappid = res.data.data.info[0].sound_appid;\r\n\t\t\t\t\t\t\tthis.agoramRoomName = res.data.data.info[0].stream;\r\n\r\n\t\t\t\t\t\t\tif (this.livetype == 5 || this.livetype == 8) {\r\n\t\t\t\t\t\t\t\tif (this.livemode == 0) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('直播模式');\r\n\t\t\t\t\t\t\t\t\tthis.livetype = 5;\r\n\t\t\t\t\t\t\t\t\tthis.fromPPt = false;\r\n\t\t\t\t\t\t\t\t\tthis.fromshare = false;\r\n\t\t\t\t\t\t\t\t\tthis.showsmallvideo = false;\r\n\t\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\t\tthis.showBigScreen = true;\r\n\t\t\t\t\t\t\t\t\tthis.showShareScreen = false;\r\n\t\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t} else if (this.livemode == 1) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('PPt模式');\r\n\t\t\t\t\t\t\t\t\tthis.livetype = 4;\r\n\t\t\t\t\t\t\t\t\tthis.fromPPt = true;\r\n\t\t\t\t\t\t\t\t\tthis.fromshare = false;\r\n\t\t\t\t\t\t\t\t\tthis.showsmallvideo = true;\r\n\t\t\t\t\t\t\t\t\tthis.scrollH -= 150;\r\n\t\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\t\tthis.showBigScreen = false;\r\n\t\t\t\t\t\t\t\t\tthis.showShareScreen = false;\r\n\t\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t} else if (this.livemode == 2) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('屏幕共享模式');\r\n\t\t\t\t\t\t\t\t\tthis.livetype = 8;\r\n\t\t\t\t\t\t\t\t\tthis.fromshare = true;\r\n\t\t\t\t\t\t\t\t\tthis.showsmallvideo = false;\r\n\t\t\t\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t\t\t\tthis.showShareScreen = true;\r\n\t\t\t\t\t\t\t\t\tthis.showBigScreen = false;\r\n\t\t\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (this.phonetype == 2) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$refs.videoIos.focus({\r\n\t\t\t\t\t\t\t\t\t\t\t\t'appid': this.agoraappid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'mRoomName': this.agoramRoomName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'uid': gData.userinfo.id\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t} else if (this.phonetype == 1) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.$refs.videoAdnroid.clearTel(\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.agoraappid + '声' + this\r\n\t\t\t\t\t\t\t\t\t\t\t\t.agoramRoomName + '网' + gData.userinfo.id\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t} else if (this.phonetype == 3) {\r\n\t\t\t\t\t\t\t\t\tthis.agoraH5(this.agoraappid, this.agoramRoomName);\r\n\t\t\t\t\t\t\t\t} else if (this.phonetype == 4) {\r\n\t\t\t\t\t\t\t\t\tthis.agoraWechat(this.agoraappid, this.agoramRoomName, gData.userinfo.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.data.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendvoice() {\r\n\t\t\t\tif (this.isshut == true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.isvoice == true) {\r\n\t\t\t\t\tthis.isvoice = false;\r\n\t\t\t\t\tthis.chat_voice = \"../../static/chat_voice@3x.png\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isvoice = true;\r\n\t\t\t\t\tthis.chat_voice = \"../../static/chat_keyboard@3x.png\";\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsubmitemojy() {\r\n\t\t\t\tif (this.isshut == true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showemojy == true) {\r\n\t\t\t\t\tthis.showemojy = false;\r\n\t\t\t\t\tthis.inputbuttom = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t\tthis.showemojy = true;\r\n\t\t\t\t\tthis.inputbuttom = 170;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//发送\r\n\t\t\tnew_sendemojy(data) {\r\n\t\t\t\tif (this.isshut == true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.send();\r\n\t\t\t\tthis.showemojy = false;\r\n\t\t\t\tthis.inputbuttom = 0;\r\n\t\t\t},\r\n\t\t\tsend(event) {\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tthis.showemojy = false;\r\n\t\t\t\tif (this.voice_url.length > 1) {} else {\r\n\t\t\t\t\tif (this.content === '') {\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: '消息不能为空',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.tabIndex = 1;\r\n\t\t\t\tlet status = (this.isQue === true) ? \"1\" : \"0\";\r\n\t\t\t\tlet gData = app.globalData;\r\n\t\t\t\t// 签名\r\n\t\t\t\tvar dic = {\r\n\t\t\t\t\t'uid': this.userInfo.id,\r\n\t\t\t\t\t'liveuid': this.liveInfo.liveuid,\r\n\t\t\t\t\t'courseid': this.liveInfo.courseid,\r\n\t\t\t\t\t'lessonid': this.liveInfo.lessonid,\r\n\t\t\t\t\t'type': this.voice_url.length > 1 ? '1' : '0',\r\n\t\t\t\t\t'content': this.content,\r\n\t\t\t\t\t'url': this.voice_url,\r\n\t\t\t\t\t'user_type': this.userInfo.type,\r\n\t\t\t\t};\r\n\t\t\t\tlet sign = this.sort2url(dic);\r\n\t\t\t\t//记录聊天信息\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: gData.site_url + 'Live.SetChat',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t'sign': sign,\r\n\t\t\t\t\t\t'uid': this.userInfo.id,\r\n\t\t\t\t\t\t'token': this.userInfo.token,\r\n\t\t\t\t\t\t'content': this.content,\r\n\t\t\t\t\t\t\"length\": this.voice_length,\r\n\t\t\t\t\t\t'status': status,\r\n\t\t\t\t\t\t'user_type': this.userInfo.type,\r\n\t\t\t\t\t\t'liveuid': this.liveInfo.liveuid,\r\n\t\t\t\t\t\t'courseid': this.liveInfo.courseid,\r\n\t\t\t\t\t\t'lessonid': this.liveInfo.lessonid,\r\n\t\t\t\t\t\t'type': this.voice_url.length > 1 ? '1' : '0',\r\n\t\t\t\t\t\t'url': this.voice_url\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t//\tconsole.log(res);\r\n\t\t\t\t\t\tif (res.data.data.code == 0) {\r\n\t\t\t\t\t\t\t//发送消息\r\n\t\t\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\t\t\t\"msg\": [{\r\n\t\t\t\t\t\t\t\t\t\"_method_\": \"SendMsg\",\r\n\t\t\t\t\t\t\t\t\t\"chatid\": res.data.data.info[0].chatid,\r\n\t\t\t\t\t\t\t\t\t\"action\": \"1\",\r\n\t\t\t\t\t\t\t\t\t\"token\": this.userInfo.token,\r\n\t\t\t\t\t\t\t\t\t\"uid\": this.userInfo.id,\r\n\t\t\t\t\t\t\t\t\t\"user_nickname\": this.userInfo.user_nickname,\r\n\t\t\t\t\t\t\t\t\t\"avatar\": this.userInfo.avatar,\r\n\t\t\t\t\t\t\t\t\t\"liveuid\": this.liveInfo.liveuid,\r\n\t\t\t\t\t\t\t\t\t\"content\": this.content,\r\n\t\t\t\t\t\t\t\t\t\"url\": this.voice_url,\r\n\t\t\t\t\t\t\t\t\t\"length\": this.voice_length,\r\n\t\t\t\t\t\t\t\t\t\"equipment\": \"app\",\r\n\t\t\t\t\t\t\t\t\t\"create_time\": Math.floor((new Date()).getTime().toString() /\r\n\t\t\t\t\t\t\t\t\t\t1000),\r\n\t\t\t\t\t\t\t\t\t\"msgtype\": 2,\r\n\t\t\t\t\t\t\t\t\t\"status\": status,\r\n\t\t\t\t\t\t\t\t\t\"type\": this.voice_url.length > 1 ? '1' : '0',\r\n\t\t\t\t\t\t\t\t\t\"user_type\": this.userInfo.type,\r\n\t\t\t\t\t\t\t\t\t'lessonid': this.liveInfo.lessonid,\r\n\t\t\t\t\t\t\t\t}],\r\n\t\t\t\t\t\t\t\t\"retcode\": \"000000\",\r\n\t\t\t\t\t\t\t\t\"retmsg\": \"OK\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tsocket.emit('broadcast', obj);\r\n\t\t\t\t\t\t\tthis.content = '';\r\n\t\t\t\t\t\t\tthis.voice_url = '';\r\n\t\t\t\t\t\t\tthis.voice_length = '';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.data.data.msg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: '网络错误'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tquestion(isQue) {\r\n\t\t\t\tif (this.isQue == false) {\r\n\t\t\t\t\tthis.isQue = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isQue = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsort2url(arr1) {\r\n\t\t\t\tvar newkey = Object.keys(arr1).sort();\r\n\t\t\t\tvar newObj = {};\r\n\t\t\t\tfor (var i = 0; i < newkey.length; i++) { //遍历newkey数组\r\n\t\t\t\t\tnewObj[newkey[i]] = arr1[newkey[i]]; //向新创建的对象中按照排好的顺序依次增加键值对\r\n\t\t\t\t}\r\n\t\t\t\tvar text = \"\";\r\n\t\t\t\tfor (var index in newObj) {\r\n\t\t\t\t\ttext = text + index + \"=\" + newObj[index] + \"&\";\r\n\t\t\t\t}\r\n\t\t\t\ttext = text.substr(0, text.length - 1);\r\n\t\t\t\ttext += '&' + app.globalData.sign_key;\r\n\r\n\t\t\t\treturn md5_js(text);\r\n\t\t\t},\r\n\t\t\tsetSign(obj) { //排序的函数\r\n\t\t\t\tvar str = '';\r\n\t\t\t\tvar newkey = Object.keys(obj).sort();\r\n\t\t\t\t//先用Object内置类的keys方法获取要排序对象的属性名，再利用Array原型上的sort方法对获取的属性名进行排序，newkey是一个数组\r\n\t\t\t\tvar newObj = {}; //创建一个新的对象，用于存放排好序的键值对\r\n\t\t\t\tfor (var i = 0; i < newkey.length; i++) { //遍历newkey数组\r\n\t\t\t\t\t//newObj[newkey[i]] = obj[newkey[i]];//向新创建的对象中按照排好的顺序依次增加键值对\r\n\t\t\t\t\tstr += newkey[i] + '=' + obj[newkey[i]] + '&';\r\n\t\t\t\t}\r\n\t\t\t\tstr += app.globalData.sign_key;\r\n\t\t\t\tvar sign = md5_js.hex_md5(str);\r\n\t\t\t\treturn sign;\r\n\t\t\t},\r\n\t\t\tpageToBottom() {\r\n\t\t\t\tlet lastIndex = this.list.length - 1;\r\n\t\t\t\tif (lastIndex < 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t_this.scrollInto = 'chat' + lastIndex;\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n\t@import url(\"/static/css/infoplay.css\");\r\n\r\n\t/deep/.uni-scroll-view ::-webkit-scrollbar {\r\n\t\t/* 隐藏滚动条，但依旧具备可以滚动的功能 */\r\n\t\tdisplay: none;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tcolor: transparent;\r\n\t\tbackground: transparent;\r\n\t}\r\n\r\n\t/deep/::-webkit-scrollbar {\r\n\t\tdisplay: none;\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tcolor: transparent;\r\n\t\tbackground: transparent;\r\n\t}\r\n</style>","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./live-infoplay.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./live-infoplay.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1752301187208\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}